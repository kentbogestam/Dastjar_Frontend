function App42Event(){App42Service.call(this);var a=this,b="ERROR IN ACCESSING EVENT SERVICE CLASS :: Set App42.enableEventService True To Access EventService Members.",c='{"app42":{"response":{"success":true}}}';this.trackEvent=function(a,d,e){if(0==unlockEventService)return void console.warn(b);if(""==a||null==a||void 0==a)return void App42Fault.throwExceptionIfNullOrBlank(a,"Event Name");var f=e;a=a.toUpperCase(),this.trackEventInternal(a,d,{success:function(a){var b=JSON.parse(a),d=b.app42.response.event.lastCommunicatedAt,e=b.app42.response.event.name;eventTypeObj=b.app42.response.event.type,__Local._saveKey(_Keys._app42_lastCommAt_+e,d),__Local._saveKey(_Keys._app42_lastCommAt_super,d),f.success(c),App42InAppMessaging.isInAppEnable&&App42InAppCommunicator.sendEvent(eventTypeObj,e)},error:function(a){f.error(a)}})},this.trackEventInternal=function(b,c,d){var e=App42.EventURL("event"),f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i={};i.eventName=b,i.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_+b),""!=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())&&(i.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())),i.superProperties=App42EventHandler.getDefaultDeviceProps(),""!=App42EventHandler.getOldInstallProperties()&&(i.installProperties=App42EventHandler.getOldInstallProperties()),i.userProperties=c;var j='{"app42":{"event":'+JSON.stringify(i)+"}}";f.body=j,App42Connection.post(e,f,j,d,h)},this.startActivity=function(a,d,e){if(0==unlockEventService)return void console.warn(b);if(""==a||null==a)return void App42Fault.throwExceptionIfNullOrBlank(a,"Activity Name");var f=e;a=a.toUpperCase(),startActivityInternal(a,d,{success:function(a){var b=JSON.parse(a),d=b.app42.response.event.lastCommunicatedAt,e=b.app42.response.event.name;__Local._saveKey(_Keys._app42_lastCommAt_start_+e,d),__Local._saveKey(_Keys._app42_lastCommAt_super,d),f.success(c)},error:function(a){f.error(a)}})},startActivityInternal=function(b,c,d){var e=App42.EventURL("event/session"),f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i={};i.eventName=b,i.action="START",i.app42_lastCommunicatedAt=__Local._checkLastCommAt(_Keys._app42_lastCommAt_end_+b,_Keys._app42_lastCommAt_start_+b),""!=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())&&(i.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())),i.superProperties=App42EventHandler.getDefaultDeviceProps(),""!=App42EventHandler.getOldInstallProperties()&&(i.installProperties=App42EventHandler.getOldInstallProperties()),i.userProperties=c;var j='{"app42":{"event":'+JSON.stringify(i)+"}}";f.body=j,App42Connection.post(e,f,j,d,h)},this.endActivity=function(a,d,e){if(0==unlockEventService)return void console.warn(b);if(""==a||null==a)return void App42Fault.throwExceptionIfNullOrBlank(a,"Activity Name");if(a=a.toUpperCase(),""==__Local._checkKey(_Keys._app42_lastCommAt_start_+a)){incrementCounter();return void e.error(new App42Exception("ActivityName",a))}var g=e;endActivityInternal(a,d,{success:function(a){var b=JSON.parse(a),d=b.app42.response.event.lastCommunicatedAt,e=b.app42.response.event.name;__Local._saveKey(_Keys._app42_lastCommAt_end_+e,d),__Local._removeKey(_Keys._app42_lastCommAt_start_+e),__Local._saveKey(_Keys._app42_lastCommAt_super,d),g.success(c)},error:function(a){g.error(a)}})},endActivityInternal=function(b,c,d){var e=App42.EventURL("event/session"),f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g);d._asyncType=!1;var i={};i.eventName=b,i.action="END",i.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_start_+b),""!=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())&&(i.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser())),i.superProperties=App42EventHandler.getDefaultDeviceProps(),""!=App42EventHandler.getOldInstallProperties()&&(i.installProperties=App42EventHandler.getOldInstallProperties()),i.userProperties=c;var j='{"app42":{"event":'+JSON.stringify(i)+"}}";f.body=j,App42Connection.post(e,f,j,d,h)},this.setLoggedInUserProperties=function(a,d){if(0==unlockEventService)return void console.warn(b);var e=d;setLoggedInUserPropertiesInternal(a,{success:function(b){console.log("Success message : "+b);var d=JSON.parse(b),f=d.app42.response.user.app42_userUpdatedOn,g=d.app42.response.user.hasProperties,h=d.app42.response.user.installProperties;"true"==g?__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(h)):__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(a)),null!=f&&__Local._saveKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser(),f),e.success(c)},error:function(a){e.error(a)}})},setLoggedInUserPropertiesInternal=function(b,c){var d=App42.EventURL("event/userproperties"),e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f),h={};h.app42_installAt=__Local._checkKey(_Keys._app42_isAppInstalled),h.installProperties=b;var i='{"app42":{"event":'+JSON.stringify(h)+"}}";e.body=i,App42Connection.post(d,e,i,c,g)},this.updateLoggedInUserProperties=function(a,d){if(0==unlockEventService)return void console.warn(b);var e=d;updateLoggedInUserPropertiesInternal(a,{success:function(a){var b=JSON.parse(a),d=b.app42.response.user.app42_userUpdatedOn,f=b.app42.response.user.hasProperties,g=b.app42.response.user.installProperties;"true"==f&&__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(g)),null!=d&&__Local._saveKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser(),d),e.success(c)},error:function(a){e.error(a)}})},updateLoggedInUserPropertiesInternal=function(b,c){var d=App42.EventURL("event/updateuserproperties"),e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f),h={};h.app42_installAt=__Local._checkKey(_Keys._app42_isAppInstalled),h.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_super),h.installProperties=b,h.app42_userUpdatedOn=__Local._checkKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser()),h.oldProperties=App42EventHandler.getOldInstallProperties();var i='{"app42":{"event":'+JSON.stringify(h)+"}}";e.body=i,App42Connection.post(d,e,i,c,g)},this.getLoggedInUserProperties=function(b){var c=App42.EventURL("event/userproperties"),d=a.populateSignParams(),e=a.populateMetaHeaderParams(),f=__merge(d,e),g={},h={};g.app42_installAt=__Local._checkKey(_Keys._app42_isAppInstalled),g.installProperties=h;var i='{"app42":{"event":'+JSON.stringify(g)+"}}";d.body=i,App42Connection.post(c,d,i,b,f)},this.getConfig=function(b){var c=App42.EventURL("event"),d=a.populateSignParams(),e=a.populateMetaHeaderParams(),f=__merge(d,e);App42Connection.get(c,d,b,null,f)},this.isAvailable=function(b,c){var d=App42.EventURL("event/isAvailable"),e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f),h={},i={};i.campaign=b,h.campaigns=i;var j='{"app42":'+JSON.stringify(h)+"}";e.body=j,App42Connection.post(d,e,j,c,g)}}function checkOperatorType(a){return myObject.EQUALS==a?"$eq":myObject.NOT_EQUALS==a?"$ne":myObject.GREATER_THAN==a?"$gt":myObject.LESS_THAN==a?"$lt":myObject.GREATER_THAN_EQUALTO==a?"$gte":myObject.LESS_THAN_EQUALTO==a?"$lte":myObject.LIKE==a?"$lk":myObject.AND==a?"$and":myObject.OR==a?"$or":null}function checkGeoOperatorType(a){return GeoOperator.NEAR==a?"$near":GeoOperator.WITHIN==a?"$within":null}function getStr(a){if(a instanceof Array){var b=JSON.stringify(a);return b}a=[a];var b=JSON.stringify(a);return b}function QueryBuilder(){this.build=function(a,b,c){if(null!=a&&null!=b&&null!=b&&(a=a.trim(),c=c.trim()),""==a||""==c||null==a||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(a,"key"),App42Fault.throwExceptionIfNullOrBlank(b,"value"),void App42Fault.throwExceptionIfNullOrBlank(c,"operator");if(b instanceof Array&&(b=JSON.stringify(b)),b instanceof Date){var d=new Date(b);b=d,console.log(b)}var e=[],f={key:a,operator:c,value:b};return e.push(f),f},this.setLoggedInUser=function(a){if(null!=a&&(a=a.trim()),""==a||null==a)return void App42Fault.throwExceptionIfNullOrBlank(a,"logged");var b=[],c={key:"_$owner.owner",operator:Operator.EQUALS,value:a};return b.push(c),b},this.setCreatedOn=function(a,b){var c=[],d={key:"_$createdAt",operator:b,value:a};return c.push(d),c},this.setUpdatedOn=function(a,b){var c=[],d={key:"_$updatedAt",operator:b,value:a};return c.push(d),c},this.setDocumentId=function(a){var b=[],c={key:"_id",operator:Operator.EQUALS,value:a};return b.push(c),b},this.buildGeoQuery=function(a,b,c){checkGeoOperatorType(b);var d=[],e={lat:a.getLat(),lng:a.getLng(),operator:b,maxDistance:c};return d.push(e),d},this.compoundOperator=function(a,b,c){for(var d=[],e={compoundOpt:b},f=0;f<a.length;f++);d.push(a),d.push(e),d.push(c);for(var g=0;g<c.length;g++);return console.log(d),d}}function App42Service(){var d,e,f,g,a=null,b=null,c=null,h=null,i=null,j=[],k=-1,l=-1,m={},n=null;this.setPageOffset=function(a){k=a},this.getPageOffset=function(){return k},this.setPageMaxRecords=function(a){l=a},this.getPageMaxRecords=function(){return l},this.setOtherMetaHeaders=function(a){m=a},this.getOtherMetaHeaders=function(){return m},this.setSessionId=function(b){a=b},this.getSessionId=function(){return a},this.getDbName=function(){return d},this.setDbName=function(a){d=a},this.getCollectionName=function(){return e},this.setCollectionName=function(a){e=a},this.setQuery=function(a,b){d=App42.getDbName(),e=a,f=b?getStr(b):null},this.addJSONObject=function(a,b){d=App42.getDbName(),e=a,g=JSON.stringify(b)},this.setModuleEvent=function(a){a=a},this.getEvent=function(){return n},this.setAdminKey=function(a){b=a},this.getAdminKey=function(){return b},this.setFbAccessToken=function(a){c=a},this.getFbAccessToken=function(){return c},this.setGeoTag=function(a){if(a instanceof GeoTag){var b={};null!=a.getLat()&&null!=a.getLng()&&(b.lat=a.getLat(),b.lng=a.getLng(),h=b)}},this.getGeoTag=function(){return h},this.setAclList=function(a){var c,b=new Array;if(a instanceof Array)for(var d=0;d<a.length;d++){var f,e=a[d].user;c={},f=a[d].permission,c[e]=f,b.push(c)}else{c={};var h,g=a.user;h=a.permission,c[g]=h,b.push(c)}i=b},this.getAclList=function(){return i},this.setSelectKeys=function(a){j=a},this.getSelectKeys=function(){return j},this.populateSignParams=function(){var d={};d.apiKey=apiKey,d.version=version;var e=new Date;if(d.timeStamp=getODataUTCDateFilter(e),null!=a&&(d.sessionId=a),null!=b&&(d.adminKey=b),null!=c&&(d.fbAccessToken=c),void 0!=localStorage&&null==a&&void 0!=localStorage.getItem("_App42_SessionId")){var f=localStorage.getItem("_App42_SessionId");d.sessionId=f}if(void 0!=localStorage&&null==c&&void 0!=localStorage.getItem("_App42_FbAccessToken")){var g=localStorage.getItem("_App42_FbAccessToken");d.fbAccessToken=g}return null!=n&&""!=n&&(d.event=n),d},this.populateMetaHeaderParams=function(){var a={};if(null!=i){var b=JSON.stringify(i);a.dataACL=b}if(k==-1||isNaN(l)||(a.pageOffset=k),l==-1||isNaN(l)||(a.pageMaxRecords=l),null!=h&&"[object Object]"==Object.prototype.toString.call(h)){var c=JSON.stringify(h);a.geoTag=c}if(j.length>0){for(var n={},o=0;o<j.length;o++)n[j[o]]="1";var p=JSON.stringify(n);a.selectKeys=p}if(Object.keys(m).length>0)for(var q in m){var r=m[q];null!=q&&""!=q&&null!=r&&""!=r&&(a[q]=r)}if(void 0!=localStorage&&void 0!=localStorage.getItem("_App42_DeviceId")){var s=localStorage.getItem("_App42_DeviceId");a.deviceId=s}if(null!=App42.getLoggedInUser()&&""!=App42.getLoggedInUser()&&(a.loggedInUser=App42.getLoggedInUser()),null!=f&&""!=f&&(a.metaQuery=f),null!=g&&""!=g&&(a.jsonObject=g),null!=d&&""!=d&&null!=e&&""!=e){var t=new Object;t.dbName=d,t.collectionName=e,a.dbCredentials=JSON.stringify(t)}return a.SDKName="javascript",a}}function GeoTag(){var a=null,b=null;this.setLat=function(b){a=b},this.getLat=function(){return a},this.setLng=function(a){b=a},this.getLng=function(){return b}}function ItemData(){var a=null,b=null,c=null,d=null,e=null,f=null;this.getItemId=function(){return a},this.setItemId=function(b){a=b},this.getName=function(){return b},this.setName=function(a){b=a},this.getDescription=function(){return c},this.setDescription=function(a){c=a},this.getImage=function(){return d},this.setImage=function(a){d=a},this.getPrice=function(){return e},this.setPrice=function(a){e=a},this.getImageName=function(){return f},this.setImageName=function(a){f=a}}function __merge(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}function clean_hex(a,b){a=a.toUpperCase(),b&&(a=a.replace(/0x/gi,""));var c=a;return a=a.replace(/[^A-Fa-f0-9]/g,""),c!=a&&alert("Warning! Non-hex characters in input string ignored."),a}function binary_to_base64(a){for(var b=new Array,c=0,d=0,e=new Array(3),f=new Array(4),g=a.length,h=0;g--;)if(e[c++]=a[h++],3==c){for(f[0]=(252&e[0])>>2,f[1]=((3&e[0])<<4)+((240&e[1])>>4),f[2]=((15&e[1])<<2)+((192&e[2])>>6),f[3]=63&e[2],c=0;c<4;c++)b+=base64_chars.charAt(f[c]);c=0}if(c){for(d=c;d<3;d++)e[d]=0;for(f[0]=(252&e[0])>>2,f[1]=((3&e[0])<<4)+((240&e[1])>>4),f[2]=((15&e[1])<<2)+((192&e[2])>>6),f[3]=63&e[2],d=0;d<c+1;d++)b+=base64_chars.charAt(f[d]);for(;c++<3;)b+="="}return b}function Convert(a){var b=clean_hex(a,!1);if(b.length%2)return alert("Error: cleaned hex string length is odd."),document.frmConvert.base64.value="",!1;for(var c=new Array,d=0;d<b.length/2;d++){var e=b.substr(2*d,2);c[d]=parseInt(e,16)}return binary_to_base64(c)}function checkPermissionType(a){return Permission.READ==a?"R":Permission.WRITE==a?"W":null}function App42Exception(a,b){this.name="App42Exception";var c;""==a?c=b+" parameter can not be blank":null==a?c=b+" parameter can not be null":"PaymentStatus"==a?c="Invalid Status ("+b+"). Could be either AUTHORIZED or UNAUTHORIZED or DECLINED":"DeviceType"==a?c="Invalid device ("+b+"). Could be either ANDROID or WP7 or iOS or NokiaX or FIREFOX or CHROME":"FileType"==a?c="Invalid fileType ("+b+").Could be either AUDIO or VIDEO or IMAGE or BINARY or TXT or XML or CSV or JSON or OTHER":"ActivityName"==a?c="Activity with the name [ "+b+" ] Is Already Ended":"RecommenderSimilarityType"==a?c="RecommenderSimilarityType [ "+b+" ] is not valid":a!=b&&(c=b+" address is not valid"),c=c,this.message=c||""}function getODataUTCDateFilter(a){var b,c=(a.getUTCMonth()+1).toString();b=1==c.length?"0"+c:c;var d,e=a.getUTCDate().toString();d=1==e.length?"0"+e:e;var f="";return f+=a.getUTCFullYear()+"-",f+=b+"-",f+=d,f+=a.getUTCHours()<10?"T0"+a.getUTCHours()+":":"T"+a.getUTCHours()+":",f+=a.getUTCMinutes()<10?"0"+a.getUTCMinutes()+":":a.getUTCMinutes()+":",f+=a.getUTCSeconds()<10?"0"+a.getUTCSeconds()+":":a.getUTCSeconds()+".",f+=a.getUTCMilliseconds(),f+="Z"}function sortAssoc(a){var b=[];for(var c in a)b.push([c,a[c]]);b.sort(function(a,b){return a[0]>b[0]?-1:a[0]<b[0]?1:0});for(var d="",e=[],f=b.length-1;f>=0;f--)e[b[f][0]]=b[f][1],d+=b[f][0]+b[f][1];return d}function createCORSRequest(a,b,c,d,e,f,g,h,i,j,k,l){var m=createXMLHTTPObject(),n=!0;void 0!=g._asyncType&&0==g._asyncType&&(n=!1),m.open(a,b,n),m.setRequestHeader("Accept","application/json"),m.setRequestHeader("signature",d),"POST"!=a&&"PUT"!=a||m.setRequestHeader("Content-Type","application/json");for(var o in l){var p=l[o];m.setRequestHeader(o.toString(),p)}m.onreadystatechange=function(){if(4==m.readyState)if(200==m.status){if(1==sessionRequest){sessionRequest=!1;var a=JSON.parse(m.responseText);if(void 0!=a.app42.response.users){var b=a.app42.response.users.user.sessionId;void 0!=localStorage&&localStorage.setItem("_App42_SessionId",b)}}if(1==sessionInvalidate){sessionInvalidate=!1;var c=JSON.parse(m.responseText),d=c.app42.response.success;d&&localStorage.removeItem("_App42_SessionId")}g.success(m.responseText)}else 200!=m.status&&g.error(m.responseText)},m.send(f)}function multipartCORSRequest(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=new FormData;null!=f.recommender&&(n.append("preferenceFile",g),n.append("name",f.name)),null!=f.userName&&n.append("userName",f.userName),null!=f.docId?(n.append("attachment",g),n.append("name",f.name),n.append("type",f.type),n.append("docId",f.docId)):null!=f.json&&(n.append("attachment",g),n.append("name",f.name),n.append("type",f.type),n.append("jsonDoc",f.json)),null!=f.type?(n.append("uploadFile",g),n.append("name",f.name),n.append("type",f.type),n.append("description",f.description)):null!=f.itemId?(n.append("imageFile",g),n.append("name",f.name),n.append("itemId",f.itemId),n.append("description",f.description),n.append("price",f.price)):null!=f.avatarName?(n.append("createAvatar",g),n.append("avatarName",f.avatarName),n.append("userName",f.userName),n.append("description",f.description)):null!=f.displayName?(n.append("uploadFile",g),n.append("name",f.name),n.append("displayName",f.displayName),n.append("description",f.description),n.append("tag",f.tag)):null!=f.accessToken?null!=f.userId?(n.append("uploadFile",g),n.append("name",f.name),n.append("accessToken",f.accessToken),n.append("userId",f.userId),n.append("message",f.message)):(n.append("uploadFile",g),n.append("name",f.name),n.append("accessToken",f.accessToken),n.append("message",f.message)):(n.append("imageFile",g),n.append("name",f.name),n.append("height",f.height),n.append("width",f.width),n.append("x",f.x),n.append("y",f.y),n.append("percentage",f.percentage),n.append("formatToConvert",f.formatToConvert)),__createMultipartCORSRequest(a,b,d,n,h,m)}function multipartCORSRequestForPhoto(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=new FormData;n.append("imageFile",g),n.append("userName",f.userName),n.append("albumName",f.albumName),n.append("name",f.name),n.append("description",f.description),__createMultipartCORSRequest(a,b,d,n,h,m)}function __createMultipartCORSRequest(a,b,c,d,e,f){var g=createXMLHTTPObject();g.open(a,b,!0),g.setRequestHeader("Accept","application/json"),g.setRequestHeader("signature",c);for(var h in f){var i=f[h];g.setRequestHeader(h.toString(),i)}g.onreadystatechange=function(){4==g.readyState&&(200==g.status?e.success(g.responseText):200!=g.status&&e.error(g.responseText))},g.send(d)}function createXMLHTTPObject(){for(var a=!1,b=0;b<XMLHttpFactories.length;b++){try{a=XMLHttpFactories[b]()}catch(a){continue}break}return a}function pair(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function guid(){return pair()+pair()+"-"+pair()+"-"+pair()+"-"+pair()+"-"+pair()+pair()+pair()}function checkDeviceType(a){if(myObject.ANDROID==a||myObject.iOS==a||myObject.WP7==a||myObject.NOKIAX==a||myObject.CHROME==a||myObject.FIREFOX==a)return a;throw new App42Exception("DeviceType",a)}function App42Push(){App42Service.call(this);var a=this;this.storeDeviceToken=function(b,c,d,e){var f=App42.URL("push/storeDeviceToken/"+b);if(checkDeviceType(d),null!=b&&null!=c&&null!=d&&(b=b.trim(),c=c.trim(),d=d.trim()),""==b||""==c||""==d||null==b||null==c||null==d)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),App42Fault.throwExceptionIfNullOrBlank(c,"deviceToken"),void App42Fault.throwExceptionIfNullOrBlank(d,"deviceType");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h),j='{"app42":{"push":{"userName":"'+b+'","deviceToken":"'+c+'","type":"'+d+'"}}}';g.body=j,App42Connection.post(f,g,j,e,i)},this.createChannelForApp=function(b,c,d){var e=App42.URL("push/createAppChannel");if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"channel"),void App42Fault.throwExceptionIfNullOrBlank(c,"description");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"app42":{"push":{"channel":{"name":"'+b+'","description":"'+c+'"}}}}';f.body=i,App42Connection.post(e,f,i,d,h)},this.subscribeToChannel=function(b,c,d){var e=App42.URL("push/subscribeToChannel/"+c);if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"channel"),void App42Fault.throwExceptionIfNullOrBlank(c,"userName");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"push":{"channel":{"userName":"'+c+'","name":"'+b+'"}}}';f.body=i,console.log(i),App42Connection.post(e,f,i,d,h)},this.unsubscribeFromChannel=function(b,c,d){var e=App42.URL("push/unsubscribeToChannel/"+c);if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"channel"),void App42Fault.throwExceptionIfNullOrBlank(c,"userName");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"push":{"channel":{"userName":"'+c+'","name":"'+b+'"}}}';f.body=i,App42Connection.put(e,f,i,d,h)},this.sendPushMessageToChannel=function(b,c,d){var e=App42.URL("push/sendPushMessageToChannel/"+b);if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"channel"),void App42Fault.throwExceptionIfNullOrBlank(c,"message");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"app42":{"push":{"message":{"channel":"'+b+'","payload":"'+c+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';f.body=i,App42Connection.post(e,f,i,d,h)},this.sendPushMessageToAllByType=function(b,c,d){var e=App42.URL("push/sendMessageToAllByType");if(checkDeviceType(c),null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"message"),void App42Fault.throwExceptionIfNullOrBlank(c,"deviceType");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"app42":{"push":{"message":{"payload":"'+b+'","type":"'+c+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';f.body=i,App42Connection.post(e,f,i,d,h)},this.sendPushMessageToUser=function(b,c,d){var e=App42.URL("push/sendMessage/"+b);if(null!=c&&null!=b&&(c=c.trim(),b=b.trim()),""==c||""==b||null==c||null==b)return App42Fault.throwExceptionIfNullOrBlank(c,"message"),void App42Fault.throwExceptionIfNullOrBlank(b,"userName");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"app42":{"push":{"message":{"userName":"'+b+'","payload":"'+c+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';f.body=i,App42Connection.post(e,f,i,d,h)},this.sendPushMessageToAll=function(b,c){var d=App42.URL("push/sendPushMessageToAll");if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"message");var e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f),h='{"app42":{"push":{"message":{"payload":"'+b+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';e.body=h,App42Connection.post(d,e,h,c,g)},this.registerAndSubscribe=function(b,c,d,e,f){var g=App42.URL("push/subscribeDeviceToChannel/");if(checkDeviceType(e),null!=c&&null!=b&&null!=d&&(c=c.trim(),b=b.trim(),d=d.trim()),""==c||""==b||null==c||null==b||""==d||""==e||null==d||null==e)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),App42Fault.throwExceptionIfNullOrBlank(c,"channel"),App42Fault.throwExceptionIfNullOrBlank(d,"deviceToken"),void App42Fault.throwExceptionIfNullOrBlank(e,"deviceType");var h=a.populateSignParams(),i=a.populateMetaHeaderParams(),j=__merge(h,i),k='{"app42":{"push":{"userName":"'+b+'","channelName":"'+c+'","deviceToken":"'+d+'","type":"'+e+'"}}}}';h.body=k,App42Connection.post(g,h,k,f,j)},this.unsubscribeDeviceToChannel=function(b,c,d,e){var f=App42.URL("push/unsubscribeDeviceToChannel/");if(null!=c&&null!=b&&null!=d&&(c=c.trim(),b=b.trim(),d=d.trim()),""==c||""==b||null==c||null==b||""==d||null==d)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),App42Fault.throwExceptionIfNullOrBlank(c,"channel"),void App42Fault.throwExceptionIfNullOrBlank(d,"deviceToken");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h),j='{"app42":{"push":{"userName":"'+b+'","channelName":"'+c+'","deviceToken":"'+d+'"}}}}';g.body=j,App42Connection.post(f,g,j,e,i)},this.deleteDeviceToken=function(b,c,d){var e=App42.URL("push");if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),void App42Fault.throwExceptionIfNullOrBlank(c,"deviceToken");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g);f.userName=b,f.deviceToken=c,App42Connection.del(e,f,d,h)},this.sendPushMessageToGroup=function(b,c,d){var e=App42.URL("push/sendPushMessageToGroup/");if(null!=b&&(b=b.trim()),""==b||""==c||null==b||null==c)return App42Fault.throwExceptionIfNullOrBlank(b,"message"),void App42Fault.throwExceptionIfNullOrBlank(c,"userList");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i=JSON.stringify(c),j='{"app42":{"push":{"message":{"payload":"'+b+'","expiry":"'+getODataUTCDateFilter(new Date)+'","users":{"user":'+i+"}}}}}";f.body=j,App42Connection.post(e,f,j,d,h)},this.sendPushToTargetUsers=function(b,c,d,e,f){var g=App42.URL("push/sendTargetPush/"+c+"/"+d),h=a.populateSignParams(),i=a.populateMetaHeaderParams(),j=__merge(h,i),k='{"app42":{"push":{"message":{"payload":"'+b+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';h.jsonQuery=getStr(e),h.body=k,App42Connection.post(g,h,k,f,j)},this.sendMessageToInActiveUsers=function(b,c,d,e){strStartDate=getODataUTCDateFilter(b),strEndDate=getODataUTCDateFilter(c);var f=App42.URL("push/sendMessageToInActiveUsers");if(null!=d&&null!=userName&&(d=d.trim()),""==b||""==c||null==b||null==c||null==d||null==d)return App42Fault.throwExceptionIfNullOrBlank(b,"startDate"),App42Fault.throwExceptionIfNullOrBlank(c,"endDate"),void App42Fault.throwExceptionIfNullOrBlank(d,"message");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h),j='{"app42":{"push":{"message":{"startDate":"'+strStartDate+'","endDate":"'+strEndDate+'","payload":"'+d+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';g.body=j,App42Connection.post(f,g,j,e,i)},this.scheduleMessageToUser=function(b,c,d,e){var f=App42.URL("push/sendMessage/"+b);if(null!=c&&null!=b&&(c=c.trim(),b=b.trim()),""==c||""==b||null==c||null==b)return App42Fault.throwExceptionIfNullOrBlank(c,"message"),void App42Fault.throwExceptionIfNullOrBlank(b,"userName");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h),j='{"app42":{"push":{"message":{"userName":"'+b+'","payload":"'+c+'","expiry":"'+getODataUTCDateFilter(d)+'"}}}}';g.body=j,App42Connection.post(f,g,j,e,i)},this.unsubscribeDevice=function(b,c,d){var e=App42.URL("push/unsubscribeDevice/"),f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"push":{"userName":"'+b+'","deviceToken":"'+c+'"}}';f.body=i,App42Connection.put(e,f,i,d,h)},this.resubscribeDevice=function(b,c,d){var e=App42.URL("push/reSubscribeDevice"),f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"push":{"userName":"'+b+'","deviceToken":"'+c+'"}}';f.body=i,App42Connection.put(e,f,i,d,h)},this.deleteAllDevices=function(b,c){var d=App42.URL("push/deleteAll");if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"userName");var e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f);e.userName=b,App42Connection.del(d,e,c,g)},this.sendPushMessageToDevice=function(b,c,d,e){var f=App42.URL("push/sendMessageToDevice/"+b);if(null!=b&&null!=d&&null!=c&&(b=b.trim(),d=d.trim(),c=c.trim()),""==c||""==b||null==c||null==b||null==d||""==d)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),App42Fault.throwExceptionIfNullOrBlank(d,"deviceId"),void App42Fault.throwExceptionIfNullOrBlank(c,"message");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h),j='{"app42":{"push":{"message":{"userName":"'+b+'","payload":"'+c+'","deviceId":"'+d+'","expiry":"'+getODataUTCDateFilter(new Date)+'"}}}}';g.body=j,App42Connection.post(f,g,j,e,i)},this.updatePushBadgeforDevice=function(b,c,d,e){var f=App42.URL("push/resetPushBadgeforDevice");if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==c||""==b||null==c||null==b||null==d||""==d)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),App42Fault.throwExceptionIfNullOrBlank(c,"deviceToken"),void App42Fault.throwExceptionIfNullOrBlank(d,"badges");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h),j='{"app42":{"push":{"userName":"'+b+'","deviceToken":"'+c+'","increment":"'+d+'"}}}';g.body=j,App42Connection.put(f,g,j,e,i)},this.updatePushBadgeforUser=function(b,c,d){var e=App42.URL("push/resetPushBadgeforUser");if(null!=b&&(b=b.trim()),""==b||null==b||null==c||""==c)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),void App42Fault.throwExceptionIfNullOrBlank(c,"badges");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"app42":{"push":{"userName":"'+b+'","increment":"'+c+'"}}}';f.body=i,App42Connection.put(e,f,i,d,h)},this.clearAllBadgeCount=function(b,c,d){var e=App42.URL("push/resetPushBadgeforDevice");if(null!=b&&null!=c&&(b=b.trim(),c=c.trim()),""==c||""==b||null==c||null==b)return App42Fault.throwExceptionIfNullOrBlank(b,"userName"),void App42Fault.throwExceptionIfNullOrBlank(c,"deviceToken");var f=a.populateSignParams(),g=a.populateMetaHeaderParams(),h=__merge(f,g),i='{"app42":{"push":{"userName":"'+b+'","deviceToken":"'+c+'","increment":"0"}}}';f.body=i,App42Connection.put(e,f,i,d,h)},this.deleteChannel=function(b,c){var d=App42.URL("push/deleteChannel");if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"channelName");var e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f);e.channelName=b,App42Connection.del(d,e,c,g)},this.getChannelUsersCount=function(b,c){var d=App42.URL("push/count/channel");if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"channelName");var e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f);e.channelName=b,App42Connection.get(d,e,c,null,g)},this.getChannelUsers=function(b,c,d,e){var f=App42.URL("push/channel/"+c+"/"+d);if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"channelName");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h);g.channelName=b,g.max=c,g.offset=d,App42Connection.get(f,g,e,null,i)},this.getUserSubscribedChannelsCount=function(b,c){var d=App42.URL("push/count/userchannels");if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"userName");var e=a.populateSignParams(),f=a.populateMetaHeaderParams(),g=__merge(e,f);e.userName=b,App42Connection.get(d,e,c,null,g)},this.getUserSubscribedChannels=function(b,c,d,e){var f=App42.URL("push/userchannels/"+c+"/"+d);if(null!=b&&(b=b.trim()),""==b||null==b)return void App42Fault.throwExceptionIfNullOrBlank(b,"userName");var g=a.populateSignParams(),h=a.populateMetaHeaderParams(),i=__merge(g,h);g.userName=b,g.max=c,g.offset=d,App42Connection.get(f,g,e,null,i)},this.trackPush=function(b){var c=App42.URL("push/trackPush"),d=a.populateSignParams(),e=a.populateMetaHeaderParams(),f=__merge(d,e);App42Connection.post(c,d,null,b,f)}}function incrementCounter(){return counter+1}function decrementCounter(){return counter-1}function _fireApp42AppInstallEvent(a,b){var c=new App42Event,d="Install",e={};c.trackEventInternal(d,e,{success:function(a){var b=JSON.parse(a),c=b.app42.response.event.lastCommunicatedAt;__Local._saveKey(_Keys._app42_isAppInstalled,c),__Local._saveKey(_Keys._app42_lastCommAt_super,c);var d={app42_installAt:c,app42_lastCommunicatedAt:c};App42EventHandler.updateDeviceStatus(d)},error:function(a){}})}var App42CampaignAPI={};(function(){this.enable=function(a){a&&(App42InAppMessaging.enableInAppMessaging(a),App42CampaignListener.initializeInAppMessaging())}}).apply(App42CampaignAPI);var Operator={EQUALS:"$eq",NOT_EQUALS:"$ne",GREATER_THAN:"$gt",LESS_THAN:"$lt",GREATER_THAN_EQUALTO:"$gte",LESS_THAN_EQUALTO:"$lte",LIKE:"$lk",AND:"$and",OR:"$or",INLIST:"$in"},GeoOperator={
NEAR:"$near",WITHIN:"$within"};!function(a){function b(a,b,i){var j=0,k=[0],l="",m=null,l=i||"UTF8";if("UTF8"!==l&&"UTF16"!==l)throw"encoding must be UTF8 or UTF16";if("HEX"===b){if(0!==a.length%2)throw"srcString of HEX type must be in byte increments";m=d(a),j=m.binLen,k=m.value}else if("ASCII"===b||"TEXT"===b)m=c(a,l),j=m.binLen,k=m.value;else{if("B64"!==b)throw"inputFormat must be HEX, TEXT, ASCII, or B64";m=e(a),j=m.binLen,k=m.value}this.getHash=function(a,b,c,d){var m,e=null,i=k.slice(),l=j;if(3===arguments.length?"number"!=typeof c&&(d=c,c=1):2===arguments.length&&(c=1),c!==parseInt(c,10)||1>c)throw"numRounds must a integer >= 1";switch(b){case"HEX":e=f;break;case"B64":e=g;break;default:throw"format must be HEX or B64"}if("SHA-1"!==a)throw"Chosen SHA variant is not supported";for(m=0;m<c;m++)i=o(i,l),l=160;return e(i,h(d))},this.getHMAC=function(a,b,i,m,n){var p,q,r,s,t=[],u=[];switch(p=null,m){case"HEX":m=f;break;case"B64":m=g;break;default:throw"outputFormat must be HEX or B64"}if("SHA-1"!==i)throw"Chosen SHA variant is not supported";if(q=64,s=160,"HEX"===b)p=d(a),r=p.binLen,p=p.value;else if("ASCII"===b||"TEXT"===b)p=c(a,l),r=p.binLen,p=p.value;else{if("B64"!==b)throw"inputFormat must be HEX, TEXT, ASCII, or B64";p=e(a),r=p.binLen,p=p.value}if(a=8*q,b=q/4-1,q<r/8){if("SHA-1"!==i)throw"Unexpected error in HMAC implementation";p=o(p,r),p[b]&=4294967040}else q>r/8&&(p[b]&=4294967040);for(q=0;q<=b;q+=1)t[q]=909522486^p[q],u[q]=1549556828^p[q];if("SHA-1"!==i)throw"Unexpected error in HMAC implementation";return i=o(u.concat(o(t.concat(k),a+j)),a+s),m(i,h(n))}}function c(a,b){var d,g,c=[],e=[],f=0;if("UTF8"===b)for(g=0;g<a.length;g+=1)for(d=a.charCodeAt(g),e=[],2048<d?(e[0]=224|(61440&d)>>>12,e[1]=128|(4032&d)>>>6,e[2]=128|63&d):128<d?(e[0]=192|(1984&d)>>>6,e[1]=128|63&d):e[0]=d,d=0;d<e.length;d+=1)c[f>>>2]|=e[d]<<24-f%4*8,f+=1;else if("UTF16"===b)for(g=0;g<a.length;g+=1)c[f>>>2]|=a.charCodeAt(g)<<16-f%4*8,f+=2;return{value:c,binLen:8*f}}function d(a){var d,e,b=[],c=a.length;if(0!==c%2)throw"String of HEX type must be in byte increments";for(d=0;d<c;d+=2){if(e=parseInt(a.substr(d,2),16),isNaN(e))throw"String of HEX type contains invalid characters";b[d>>>3]|=e<<24-d%8*4}return{value:b,binLen:4*c}}function e(a){var d,e,f,g,h,b=[],c=0;if(-1===a.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(d=a.indexOf("="),a=a.replace(/\=/g,""),-1!==d&&d<a.length)throw"Invalid '=' found in base-64 string";for(e=0;e<a.length;e+=4){for(h=a.substr(e,4),f=g=0;f<h.length;f+=1)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[f]),g|=d<<18-6*f;for(f=0;f<h.length-1;f+=1)b[c>>2]|=(g>>>16-8*f&255)<<24-c%4*8,c+=1}return{value:b,binLen:8*c}}function f(a,b){var e,f,c="",d=4*a.length;for(e=0;e<d;e+=1)f=a[e>>>2]>>>8*(3-e%4),c+="0123456789abcdef".charAt(f>>>4&15)+"0123456789abcdef".charAt(15&f);return b.outputUpper?c.toUpperCase():c}function g(a,b){var e,f,g,c="",d=4*a.length;for(e=0;e<d;e+=3)for(g=(a[e>>>2]>>>8*(3-e%4)&255)<<16|(a[e+1>>>2]>>>8*(3-(e+1)%4)&255)<<8|a[e+2>>>2]>>>8*(3-(e+2)%4)&255,f=0;4>f;f+=1)c=8*e+6*f<=32*a.length?c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>6*(3-f)&63):c+b.b64Pad;return c}function h(a){var b={outputUpper:!1,b64Pad:"="};try{a.hasOwnProperty("outputUpper")&&(b.outputUpper=a.outputUpper),a.hasOwnProperty("b64Pad")&&(b.b64Pad=a.b64Pad)}catch(a){}if("boolean"!=typeof b.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof b.b64Pad)throw"Invalid b64Pad formatting option";return b}function i(a,b){return a<<b|a>>>32-b}function j(a,b,c){return a^b^c}function k(a,b,c){return a&b^~a&c}function l(a,b,c){return a&b^a&c^b&c}function m(a,b){var c=(65535&a)+(65535&b);return((a>>>16)+(b>>>16)+(c>>>16)&65535)<<16|65535&c}function n(a,b,c,d,e){var f=(65535&a)+(65535&b)+(65535&c)+(65535&d)+(65535&e);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)+(f>>>16)&65535)<<16|65535&f}function o(a,b){var d,e,f,g,h,o,u,v,x,c=[],p=k,q=j,r=l,s=i,t=m,w=n,y=[1732584193,4023233417,2562383102,271733878,3285377520];for(a[b>>>5]|=128<<24-b%32,a[(b+65>>>9<<4)+15]=b,x=a.length,u=0;u<x;u+=16){for(d=y[0],e=y[1],f=y[2],g=y[3],h=y[4],v=0;80>v;v+=1)c[v]=16>v?a[v+u]:s(c[v-3]^c[v-8]^c[v-14]^c[v-16],1),o=20>v?w(s(d,5),p(e,f,g),h,1518500249,c[v]):40>v?w(s(d,5),q(e,f,g),h,1859775393,c[v]):60>v?w(s(d,5),r(e,f,g),h,2400959708,c[v]):w(s(d,5),q(e,f,g),h,3395469782,c[v]),h=g,g=f,f=s(e,30),e=d,d=o;y[0]=t(d,y[0]),y[1]=t(e,y[1]),y[2]=t(f,y[2]),y[3]=t(g,y[3]),y[4]=t(h,y[4])}return y}"function"==typeof define?define(function(){return b}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=b:exports=b:a.jsSHA=b}(this),this.JSON||(this.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Base64=function(){var a=76,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(a){for(var c={},d=0;d<64;d++)c[b.substr(d,1)]=d;a=a.replace(/\s+/g,"");for(var i,e="",f=new Array,h=a.length,d=0;d<h;d+=4)i=(255&c[a.charAt(d)])<<18,i|=(255&c[a.charAt(d+1)])<<12,i|=(255&c[a.charAt(d+2)])<<6,i|=(255&c[a.charAt(d+3)])<<0,e+=String.fromCharCode((16711680&i)>>16),"="!=a.charAt(d+2)&&(e+=String.fromCharCode((65280&i)>>8)),"="!=a.charAt(d+3)&&(e+=String.fromCharCode((255&i)>>0)),e.length>1024&&(f.push(e),e="");e.length>0&&f.push(e);for(var j=new Array;f.length>1;){for(var k=f.length,l=0;l<k;l+=2)l+1==k?j.push(f[l]):j.push(""+f[l]+f[l+1]);f=j,j=new Array}return f[0]},d=function(c){for(var e,f,d=new Array,g=0,h="",i=0,h="";c.length>=g+3;)e=(255&c.charCodeAt(g++))<<16|(255&c.charCodeAt(g++))<<8|255&c.charCodeAt(g++),h+=b.charAt((16515072&e)>>18)+b.charAt((258048&e)>>12)+b.charAt((4032&e)>>6)+b.charAt(63&e),i+=4,i>a-3&&(h+="\n",d.push(h),h="",i=0);c.length-g>0&&c.length-g<3&&(f=Boolean(c.length-g-1),e=(255&c.charCodeAt(g++))<<16|(f?(255&c.charCodeAt(g))<<8:0),h+=b.charAt((16515072&e)>>18)+b.charAt((258048&e)>>12)+(f?b.charAt((4032&e)>>6):"=")+"="),d.push(h);for(var j=new Array;d.length>1;){for(var k=d.length,l=0;l<k;l+=2)l+1==k?j.push(d[l]):j.push(""+d[l]+d[l+1]);d=j,j=new Array}return d[0]};return{encode:d,decode:c}}(),base64_chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a,b){function f(){if(!d){d=!0;for(var a=0;a<c.length;a++)c[a].fn.call(window,c[a].ctx);c=[]}}function g(){"complete"===document.readyState&&f()}a=a||"docReady",b=b||window;var c=[],d=!1,e=!1;b[a]=function(a,b){return d?void setTimeout(function(){a(b)},1):(c.push({fn:a,ctx:b}),void("complete"===document.readyState?setTimeout(f,1):e||(document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):(document.attachEvent("onreadystatechange",g),window.attachEvent("onload",f)),e=!0)))}}("docReady",window);var App42EventTracker={};(function(){this._trackBrowserSession=function(){docReady(function(){this.trackAppSessionStart()}),window.onfocus=function(){this.trackAppSessionStart()},window.onblur=function(){this.trackAppSessionEnd()},window.onbeforeunload=function(){this.trackAppSessionEnd()}},trackAppSessionStart=function(){var a=new App42Event,b="AppSession",c={};a.startActivity(b,c,{success:function(a){console.log(":::: AppSession Start Success  :::: ")},error:function(a){console.log(":::: AppSession Start Errorr  :::: "+a)}})},trackAppSessionEnd=function(){var a=new App42Event,b="AppSession",c={};a.endActivity(b,c,{success:function(a){console.log("::: AppSession End Success  ::: ")},error:function(a){console.log(":::: AppSession End Error  :::: "+a)}})}}).apply(App42EventTracker);var Permission={READ:"R",WRITE:"W"},App42Connection={},App42Fault={},App42={},apiKey,secretKey,customeCodeURL="https://customcode.shephertz.com/",uri="https://api.shephertz.com/cloud/1.0/",eventUri="https://analytics.shephertz.com/cloud/1.0/",name,geoTag,sessionRequest=!1,unlockEventService=!1,sessionInvalidate=!1,loggedInUser=null,dbName=null,addAtatchmentJSONParams=null;(function(){this.initialize=function(a,b){apiKey=a,secretKey=b,void 0==localStorage.getItem("_App42_DeviceId")&&localStorage.setItem("_App42_DeviceId",guid()),loggedInUser=localStorage.getItem("_App42_LoggedInUser"),null==this.getLoggedInUser()&&this.setLoggedInUser(localStorage.getItem("_App42_DeviceId")),__Installation._fireInstallEvent(a,b)},this.enableAppStateEventTracking=function(a){a&&(unlockEventService=!0,App42EventTracker._trackBrowserSession())},this.enableEventService=function(a){a&&(unlockEventService=!0)},this.setDbName=function(a){dbName=a},this.getDbName=function(){return dbName},this.setLoggedInUser=function(a){loggedInUser=a,localStorage.setItem("_App42_LoggedInUser",a),unlockEventService&&__Installation._getCurrentLoggedInUserProperties(apiKey,secretKey)},this.getLoggedInUser=function(){return loggedInUser},this.setBaseUrl=function(a){uri=a},this.setEventBaseUrl=function(a){eventUri=a},this.setCustomeCodeURL=function(a){customeCodeURL=a},this.URL=function(a){var b=uri,c=b+a;return c},this.EventURL=function(a){var b=eventUri,c=b+a;return c},this.CustomCodeURL=function(a){var b=customeCodeURL,c=b+a;return c},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}).apply(App42),App42Exception.prototype=Error.prototype,function(){function a(){this.name="App42Exception";var a="Set your apiKey and secretKey correctly in App42.initialize( )";this.message=a||""}this.throwExceptionIfNullOrBlank=function(a,b){if(""==a||null==a){var c=new App42Exception(a,b);throw c}},this.appError=function(){var b=new a;throw b},a.prototype=Error.prototype}.apply(App42Fault);var version="1.0",XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];(function(){this.get=function(a,b,c,d,e){if(null==b.apiKey||null==secretKey||""==secretKey||""==b.apiKey)return void App42Fault.appError();var f=new jsSHA(sortAssoc(b),"ASCII"),g=f.getHMAC(secretKey,"ASCII","SHA-1","HEX"),h=Convert(g);b.signature=h;var i="";b.userList?i="&userList="+b.userList:b.userName?i="&userName="+b.userName+"&":b.channelName?i="&channelName="+b.channelName+"&":b.jsonQuery?e.jsonQuery=b.jsonQuery:i="";var j="",k="";null!=d&&(j=d.orderByKey?"&orderByKey="+d.orderByKey:"",k=d.orderByType?"&orderByType="+d.orderByType:""),createCORSRequest("GET",a+"?version="+b.version+i+j+k,b.timeStamp,h,b.apiKey,null,c,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,e)},this.post=function(a,b,c,d,e){if(null==b.apiKey||null==secretKey||""==secretKey||""==b.apiKey)return void App42Fault.appError();var f="";b.jsonQuery&&(f="&jsonQuery="+b.jsonQuery);var g=new jsSHA(sortAssoc(b),"ASCII"),h=g.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(h);b.signature=i,createCORSRequest("POST",a+"?version="+b.version+f,b.timeStamp,i,b.apiKey,c,d,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,e)},this.put=function(a,b,c,d,e){if(null==b.apiKey||null==secretKey||""==secretKey||""==b.apiKey)return void App42Fault.appError();var f=new jsSHA(sortAssoc(b),"ASCII"),g=f.getHMAC(secretKey,"ASCII","SHA-1","HEX"),h=Convert(g);b.signature=h,createCORSRequest("PUT",a+"?version="+b.version,b.timeStamp,h,b.apiKey,c,d,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,e)},this.del=function(a,b,c,d){if(null==b.apiKey||null==secretKey||""==secretKey||""==b.apiKey)return void App42Fault.appError();var e=null;b.avatarName&&(e=b.avatarName,delete b.avatarName);var f=new jsSHA(sortAssoc(b),"ASCII"),g=f.getHMAC(secretKey,"ASCII","SHA-1","HEX"),h=Convert(g);if(b.signature=h,b.geoPoints){var i="&geoPoints="+b.geoPoints;a=a+"?version="+b.version+i}else if(b.deviceToken)i="?deviceToken="+b.deviceToken+"&userName="+b.userName+"&",a=a+i+"?version="+b.version;else if(b.value)i="&value="+b.value+"&timeStamp="+d.timeStamp+"&&apiKey="+d.apiKey+"&",a=a+"?version="+b.version+i;else if(b.channelName)i="?channelName="+b.channelName,a+=i;else if(e)i="?avatarName="+e+"&",a+=i;else if(b.messageIds){i="&messageIds="+b.messageIds;a=a+"?version="+b.version+"&timeStamp="+b.timeStamp+i+"&apiKey="+b.apiKey+"&"}else b.groupName&&b.tagName?a+="?":b.groupName&&b.userName?a+="?":b.role&&b.userName?a+="?":b.userName?(i="?userName="+b.userName,a+=i):(i="",a=a+"?version="+b.version+i);createCORSRequest("DELETE",a,b.timeStamp,h,b.apiKey,null,c,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,d)},this.addAttachmentParams=function(a){var b={};null!=a.docId||null!=a.json?(void 0==a.type?b.type="OTHER":b.type=a.type,void 0==a.name?b.name="Default":b.name=a.name,null!=a.docId?b.docId=a.docId:b.json=a.json,addAtatchmentJSONParams=b):addAtatchmentJSONParams=b},this.multipart=function(a,b,c,d,e){if(null==b.apiKey||null==secretKey||""==secretKey||""==b.apiKey)return void App42Fault.appError();var f=null;b.recommender&&(f=b.recommender,delete b.recommender);var g=new jsSHA(sortAssoc(b),"ASCII"),h=g.getHMAC(secretKey,"ASCII","SHA-1","HEX"),i=Convert(h);b.signature=i,b=__merge(b,addAtatchmentJSONParams),b.albumName?multipartCORSRequestForPhoto("POST",a+"?version="+b.version,b.timeStamp,i,b.apiKey,b,c,d,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,e):(b.recommender=f,multipartCORSRequest("POST",a+"?version="+b.version,b.timeStamp,i,b.apiKey,b,c,d,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,e))},this.executeCustomCode=function(a,b,c,d,e){if(null==e.apiKey||null==secretKey||""==secretKey||""==e.apiKey)return void App42Fault.appError();var f=new jsSHA(sortAssoc(b),"ASCII"),g=f.getHMAC(secretKey,"ASCII","SHA-1","HEX"),h=Convert(g);createCORSRequest("POST",a+"?",b.timeStamp,h,b.apiKey,c,d,b.sessionId,b.adminKey,b.fbAccessToken,geoTag,e)}}).apply(App42Connection);var myObject={ANDROID:"ANDROID",iOS:"iOS",WP7:"WP7",NOKIAX:"NokiaX",CHROME:"CHROME",FIREFOX:"FIREFOX"},App42InAppMessaging={};(function(){this.enableInAppMessaging=function(a){console.log("IsInAppMessagingEnabled : "+a),a?this.isInAppEnable=!0:this.isInAppEnable=!1}}).apply(App42InAppMessaging);var App42InAppCommunicator={};(function(){this.sendEvent=function(a,b){App42CampaignListener.checkCampaignConfig(a,b)}}).apply(App42InAppCommunicator);var App42EventHandler={},_Keys={_app42_lastUserUpdatedOn_:"_app42_lastUserUpdatedOn_",_app42_defaultDeviceInfo:"_app42_defaultDeviceInfo",_app42_oldUserProps_:"_app42_oldUserProps_",_app42_isAppInstalled:"_app42_isAppInstalled",_app42_lastCommAt_:"_app42_lastCommAt_",_app42_lastCommAt_super:"_app42_lastCommAt_super",_app42_lastCommAt_start_:"_app42_lastCommAt_start_",_app42_lastCommAt_end_:"_app42_lastCommAt_end_"},counter=0;(function(){this.generateSuperProperties=function(){var a={},b="-",c="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",c+=""+width+" x "+height);var i,j,k,d=navigator.appVersion,e=navigator.userAgent,f=navigator.appName,g=""+parseFloat(navigator.appVersion),h=parseInt(navigator.appVersion,10);(j=e.indexOf("Opera"))!=-1?(f="Opera",g=e.substring(j+6),(j=e.indexOf("Version"))!=-1&&(g=e.substring(j+8))):(j=e.indexOf("MSIE"))!=-1?(f="Microsoft Internet Explorer",g=e.substring(j+5)):(j=e.indexOf("Chrome"))!=-1?(f="Chrome",g=e.substring(j+7)):(j=e.indexOf("Safari"))!=-1?(f="Safari",g=e.substring(j+7),(j=e.indexOf("Version"))!=-1&&(g=e.substring(j+8))):(j=e.indexOf("Firefox"))!=-1?(f="Firefox",g=e.substring(j+8)):e.indexOf("Trident/")!=-1?(f="Microsoft Internet Explorer",g=e.substring(e.indexOf("rv:")+3)):(i=e.lastIndexOf(" ")+1)<(j=e.lastIndexOf("/"))&&(f=e.substring(i,j),g=e.substring(j+1),f.toLowerCase()==f.toUpperCase()&&(f=navigator.appName)),(k=g.indexOf(";"))!=-1&&(g=g.substring(0,k)),(k=g.indexOf(" "))!=-1&&(g=g.substring(0,k)),(k=g.indexOf(")"))!=-1&&(g=g.substring(0,k)),h=parseInt(""+g,10),isNaN(h)&&(g=""+parseFloat(navigator.appVersion),h=parseInt(navigator.appVersion,10));var l=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(d),m=!!navigator.cookieEnabled;"undefined"!=typeof navigator.cookieEnabled||m||(document.cookie="testcookie",m=document.cookie.indexOf("testcookie")!=-1);var n=b,o=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var p in o){var q=o[p];if(q.r.test(e)){n=q.s;break}}var r=b;switch(/Windows/.test(n)&&(r=/Windows (.*)/.exec(n)[1],n="Windows"),n){case"Mac OS X":r=/Mac OS X (10[\.\_\d]+)/.exec(e)[1];break;case"Android":r=/Android ([\.\_\d]+)/.exec(e)[1];break;case"iOS":r=/OS (\d+)_(\d+)_?(\d+)?/.exec(d),r=r[1]+"."+r[2]+"."+(0|r[3])}var s="no check";if("undefined"!=typeof swfobject){var t=swfobject.getFlashPlayerVersion();s=t.major>0?t.major+"."+t.minor+" r"+t.release:b}var u=document.referrer,v=document.referrer.split("/")[2];return""==u&&(u="Self",v="Self"),a.app42_browser_version=g,a.app42_browser=f,a.app42_brand=f,a.app42_screen_width=screen.width,a.app42_screen_height=screen.height,a.app42_screen_dpi=96,a.app42_screen_colourDepth=screen.colorDepth,a.app42_screen_pixelDepth=screen.pixelDepth,a.app42_css_pixel=window.devicePixelRatio,a.app42_os=n,a.app42_os_version=r,a.app42_cookieEnabled=m,a.app42_flashVersion=s,a.app42_referrer=u,a.app42_referring_domain=v,a.app42_mobile=l,a.app42_lastCommunicatedAt="",a.app42_counter=1,a},this.getDefaultDeviceProps=function(){var a={};if(""!=__Local._checkKey(_Keys._app42_defaultDeviceInfo)){var b={};b.app42_counter=incrementCounter(),b.app42_lastCommunicatedAt=__Local._checkKey(_Keys._app42_lastCommAt_super),this.updateDeviceStatus(b),a=JSON.parse(__Local._fetchKey(_Keys._app42_defaultDeviceInfo))}else a=this.generateSuperProperties(),__Local._saveKey(_Keys._app42_defaultDeviceInfo,JSON.stringify(a));return a},this.updateDeviceStatus=function(a){var b={},c={};c=JSON.parse(__Local._fetchKey(_Keys._app42_defaultDeviceInfo));for(var d in c)b[d]=c[d];for(var d in a)b[d]=a[d];__Local._saveKey(_Keys._app42_defaultDeviceInfo,JSON.stringify(b))},this.getOldInstallProperties=function(){var a=__Local._fetchKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser());return null!=a&&""!=a&&void 0!=a||(a='""'),JSON.parse(a)}}).apply(App42EventHandler);var __Local={_checkKey:function(a){var b="";return b=null==this._fetchKey(a)||""==this._fetchKey(a)||void 0==this._fetchKey(a)?"":this._fetchKey(a)},_checkLastCommAt:function(a,b){var c="";return null!=this._fetchKey(a)&&""!=this._fetchKey(a)&&void 0!=this._fetchKey(a)?c=this._fetchKey(a):(c="",c=null==this._fetchKey(b)||""==this._fetchKey(b)||void 0==this._fetchKey(b)?"":this._fetchKey(b))},_saveKey:function(a,b){localStorage.setItem(a,b)},_fetchKey:function(a){return localStorage.getItem(a)},_removeKey:function(a){localStorage.removeItem(a)}},__Installation={_fireInstallEvent:function(a,b){var c=__Local._checkKey(_Keys._app42_isAppInstalled);null!=c&&""!=c&&void 0!=c||_fireApp42AppInstallEvent(a,b)},_getCurrentLoggedInUserProperties:function(a,b){var c=new App42Event;c.getLoggedInUserProperties({success:function(a){var b=JSON.parse(a),c=b.app42.response.user.app42_userUpdatedOn,d=b.app42.response.user.hasProperties,e=b.app42.response.user.installProperties;"true"==d&&__Local._saveKey(_Keys._app42_oldUserProps_+App42.getLoggedInUser(),JSON.stringify(e)),null!=c&&__Local._saveKey(_Keys._app42_lastUserUpdatedOn_+App42.getLoggedInUser(),c)},error:function(a){}})}};